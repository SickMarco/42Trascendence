<app-navbar></app-navbar>
<div class="profile-container">
  <div class="profile-box" *ngIf="user">
    <img
      id="image"
      class="profile-image"
      [src]="user.img"
      alt="Profile image"
      *ngIf="currentUser; else elseBlock"
      appChangeImage
      [ngStyle]="{
        color: user.isPlaying ? 'orange' : user.isOnline ? 'green' : 'red'
      }"
    />
    <ng-template #elseBlock>
      <img
        id="image"
        class="profile-image"
        [src]="user.img"
        alt="Profile image"
        [ngStyle]="{
          color: user.isPlaying ? 'orange' : user.isOnline ? 'green' : 'red'
        }"
      />
    </ng-template>
    <input
      *ngIf="currentUser"
      type="file"
      accept="image/*"
      (change)="onFileSelected($event)"
      style="display: none"
      #fileInput
    />
    <button
      *ngIf="currentUser"
      (click)="onFileSelected($event)"
      appChangeImage
      id="text"
      class="profile-image change-text"
    >
      Change Image
    </button>
    <div class="username-space">
      <span class="username">{{ user.username }}</span>
    </div>
    <div class="user-buttons" *ngIf="!currentUser">
      <div class="friend" *ngIf="!isFriend; else addFriendTemplate">
        <i class="fa-solid fa-user-plus fa-2xl" (click)="addFriend()"></i><br />
        <span (click)="addFriend()">ADD FRIEND</span>
      </div>
      <ng-template #addFriendTemplate>
        <div class="friend">
          <i class="fa-solid fa-user-minus fa-2xl" (click)="removeFriend()"></i
          ><br />
          <span (click)="removeFriend()">REMOVE FRIEND</span>
        </div>
      </ng-template>
      <div class="chat">
        <i class="fa-solid fa-headset fa-2xl"></i><br /><span>CHAT</span>
      </div>
      <div class="block">
        <i class="fa-solid fa-ban fa-2xl" (click)="blockUser()"> </i><br />
        <span (click)="blockUser()">BLOCK</span>
      </div>
    </div>
    <div class="matchbox">
      <div class="win">WIN</div>
      <div class="winRes">
        {{ user.Wins }}
      </div>
      <div class="lose">LOSE</div>
      <div class="loseRes">
        {{ user.Losses }}
      </div>
    </div>
    <div class="qr" *ngIf="qrCode !== '' && !twofa && currentUser">
      <p class="warning">ATTENTION! SCAN YOUR QR CODE BEFORE CONFIRM</p>
      <img class="popup" [src]="[qrCode]" />
      <div class="buttons">
        <button class="left" (click)="onConfirm2FA()">CONFIRM</button>
        <button class="right" (click)="onReject2FA()">REJECT</button>
      </div>
    </div>
    <div class="qr" *ngIf="qrCode !== '' && twofa">
      <p class="warning">YOUR QR CODE</p>
      <img class="popup" [src]="[qrCode]" />
      <div class="buttons">
        <button class="left" (click)="closeQr()">CLOSE</button>
        <button class="right" (click)="onReject2FA()">DISABLE 2FA</button>
      </div>
    </div>
    <div class="logout" *ngIf="currentUser">
      <button class="logout-bt" (click)="logout()">LOGOUT</button>
    </div>
    <div
      class="google-auth"
      (click)="onEnable2FA()"
      *ngIf="currentUser"
      [ngStyle]="{
        color: user.is2faEnabled ? 'green' : 'red'
      }"
    >
      <i class="fa-sharp fa-solid fa-shield-halved fa-2xl"> 2 FA</i>
    </div>
  </div>
</div>
