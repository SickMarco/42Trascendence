<app-navbar></app-navbar>
<div class="profile-container">
  <div class="profile-box">
    <img
      id="image"
      class="profile-image"
      [src]="profileImage"
      alt="Profile image"
      [ngStyle]="{
        color: isOnline ? (isPlaying ? 'orange' : 'green') : 'red'
      }"
      *ngIf="currentUser; else elseBlock"
      appChangeImage
    />
    <ng-template #elseBlock>
      <img
        id="image"
        class="profile-image"
        [src]="profileImage"
        alt="Profile image"
      />
    </ng-template>
    <input
      *ngIf="currentUser"
      type="file"
      accept="image/*"
      (change)="onFileSelected($event)"
      style="display: none"
      #fileInput
    />
    <button
      *ngIf="currentUser"
      (click)="onFileSelected($event)"
      appChangeImage
      id="text"
      class="profile-image change-text"
    >
      Change Image
    </button>
    <div class="username-space">
      <span class="username">{{ user }}</span>
    </div>
    <div class="user-buttons" *ngIf="!currentUser">
      <div class="friend">
        <i class="fa-solid fa-user-plus fa-2xl"></i><br />
        <span (click)="addFriend()">ADD FRIEND</span>
      </div>
      <div class="chat">
        <i class="fa-solid fa-headset fa-2xl"></i><br /><span>CHAT</span>
      </div>
      <div class="block">
        <i class="fa-solid fa-ban fa-2xl"> </i><br />
        <span>BLOCK</span>
      </div>
    </div>
    <div class="matchbox">
      <div class="win">WIN</div>
      <div class="winRes">
        {{ win }}
      </div>
      <div class="lose">LOSE</div>
      <div class="loseRes">
        {{ lose }}
      </div>
    </div>
    <div class="qr" *ngIf="qrCode !== '' && !twofa && currentUser">
      <p class="warning">ATTENTION! SCAN YOUR QR CODE BEFORE CONFIRM</p>
      <img class="popup" [src]="[qrCode]" />
      <div class="buttons">
        <button class="left" (click)="onConfirm2FA()">CONFIRM</button>
        <button class="right" (click)="onReject2FA()">REJECT</button>
      </div>
    </div>
    <div class="qr" *ngIf="qrCode !== '' && twofa">
      <p class="warning">YOUR QR CODE</p>
      <img class="popup" [src]="[qrCode]" />
      <div class="buttons">
        <button class="left" (click)="closeQr()">CLOSE</button>
        <button class="right" (click)="onReject2FA()">DISABLE 2FA</button>
      </div>
    </div>
    <div class="logout" *ngIf="currentUser">
      <button class="logout-bt" (click)="logout()">LOGOUT</button>
    </div>
    <div class="google-auth" (click)="onEnable2FA()" *ngIf="currentUser">
      <i class="fa-sharp fa-solid fa-shield-halved fa-2xl"> 2 FA</i>
    </div>
  </div>
</div>
